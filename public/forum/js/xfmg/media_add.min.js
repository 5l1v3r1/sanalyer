/*
 * XenForo media_add.min.js
 * Copyright 2010-2017 XenForo Ltd.
 * Released under the XenForo License Agreement: https://xenforo.com/license-agreement
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,d,c){a instanceof String&&(a=String(a));for(var e=a.length,b=0;b<e;b++){var f=a[b];if(d.call(c,f,b,a))return{i:b,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,c){a!=Array.prototype&&a!=Object.prototype&&(a[d]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,d,c,e){if(d){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var b=a[e];b in c||(c[b]={});c=c[b]}a=a[a.length-1];e=c[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");var XFMG=window.XFMG||{};
!function(a,d,c,e){XFMG.attachmentManager=null;XFMG.MediaManager=XF.Element.newHandler({options:{mediaActionUrl:null,onInsertHandler:".js-mediaOnInsertHandler"},init:function(){XFMG.attachmentManager=XF.Element.applyHandler(this.$target,"attachment-manager",this.options);this.options=a.extend({},this.options,XFMG.attachmentManager.options);XFMG.attachmentManager.$filesContainer.on("click",this.options.actionButton,a.proxy(this,"actionButtonClick"))},actionButtonClick:function(b){b.preventDefault();
var f=a(b.target);b=f.attr("data-action");f=f.closest(this.options.fileRow);switch(b){case "delete":this.deleteMediaItem(f)}},deleteMediaItem:function(a){var b=a.data("temp-media-id"),c=this.options.mediaActionUrl;b&&(c?XF.ajax("post",c,{delete:b},function(b){b.delete&&XFMG.attachmentManager.removeFileRow(a)},{skipDefaultSuccess:!0}):XFMG.attachmentManager.removeFileRow(a))}});XFMG.LinkChecker=XF.Element.newHandler({options:{pasteInput:".js-pasteInput",pasteError:".js-pasteError"},$pasteInput:null,
$pasteError:null,init:function(){var b=this.$target;this.$pasteInput=b.find(this.options.pasteInput);this.$pasteInput.length?(this.$pasteError=b.find(this.options.pasteError),this.$pasteInput.on("paste",a.proxy(this,"paste")),b.on("ajax-submit:response",a.proxy(this,"complete")),b.on("ajax-submit:error",a.proxy(this,"error"))):console.error("No input to monitor for pasted text.")},paste:function(a){var b=this.$pasteError,c=this;setTimeout(function(){c.$target.submit();b.removeClassTransitioned("is-active")},
100)},complete:function(a,c){c.errors||c.exception||(a.preventDefault(),this.$pasteInput.val(""),XF.hideOverlays(),XFMG.attachmentManager.insertUploadedRow(c.attachment))},error:function(a,c){var b=this.$target.find(this.options.pasteError);b.length&&(a.preventDefault(),b.find("div").text(c.errors[0]),b.addClassTransitioned("is-active"),this.$pasteInput.val(""))}});XF.Element.register("media-manager","XFMG.MediaManager");XF.Element.register("link-checker","XFMG.LinkChecker")}(jQuery,window,document);
