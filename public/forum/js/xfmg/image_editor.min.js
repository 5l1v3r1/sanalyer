/*
 * XenForo image_editor.min.js
 * Copyright 2010-2017 XenForo Ltd.
 * Released under the XenForo License Agreement: https://xenforo.com/license-agreement
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,d,c){b instanceof String&&(b=String(b));for(var e=b.length,a=0;a<e;a++){var f=b[a];if(d.call(c,f,a,b))return{i:a,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,c){b!=Array.prototype&&b!=Object.prototype&&(b[d]=c.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,d,c,e){if(d){c=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var a=b[e];a in c||(c[a]={});c=c[a]}b=b[b.length-1];e=c[b];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");var XFMG=window.XFMG||{};
!function(b,d,c,e){XFMG.ImageEditor=XF.Element.newHandler({options:{image:".js-mediaImg",cropData:".js-cropData",move:".js-ctrlDragMove",crop:".js-ctrlDragCrop",zoomIn:".js-ctrlZoomIn",zoomOut:".js-ctrlZoomOut",rotateLeft:".js-ctrlRotateLeft",rotateRight:".js-ctrlRotateRight",flipH:".js-ctrlFlipH",flipV:".js-ctrlFlipV",clear:".js-ctrlClear"},$image:null,init:function(){var a=this,c=this.$target,d=c.find(this.options.image),e=c.find(this.options.cropData);d.length&&d.is("img")||console.error("Image editor must contain an img element");
this.$image=d;d.cropper({viewMode:2,autoCrop:!1,ready:function(){c.find(a.options.move+", "+a.options.crop).on("click",b.proxy(a,"dragMode"));c.find(a.options.zoomIn+", "+a.options.zoomOut).on("click",b.proxy(a,"zoom"));c.find(a.options.rotateLeft+", "+a.options.rotateRight).on("click",b.proxy(a,"rotate"));c.find(a.options.flipH+", "+a.options.flipV).on("click",b.proxy(a,"flip"));c.find(a.options.clear).on("click",b.proxy(a,"clear"))},crop:function(a){e.val(JSON.stringify({scaleX:a.scaleX,scaleY:a.scaleY,
rotate:a.rotate,x:a.x,y:a.y,width:a.width,height:a.height}))}})},dragMode:function(a){a=b(a.currentTarget);a.is(this.options.move)?this.$image.cropper("setDragMode","move"):a.is(this.options.crop)&&this.$image.cropper("setDragMode","crop")},zoom:function(a){a=b(a.currentTarget);a.is(this.options.zoomIn)?this.$image.cropper("zoom",.1):a.is(this.options.zoomOut)&&this.$image.cropper("zoom",-.1)},rotate:function(a){a=b(a.currentTarget);a.is(this.options.rotateLeft)?this.$image.cropper("rotate",-10):
a.is(this.options.rotateRight)&&this.$image.cropper("rotate",10)},flip:function(a){a=b(a.currentTarget);var c=a.data("scale");a.is(this.options.flipH)?this.$image.cropper("scaleX",c):a.is(this.options.flipV)&&this.$image.cropper("scaleY",c);a.data("scale",-1===c?1:-1)},clear:function(a){this.$image.cropper("clear")}});XF.Element.register("image-editor","XFMG.ImageEditor")}(jQuery,window,document);
